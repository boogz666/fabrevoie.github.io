<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIAGNOSTIC - Fabrevoie</title>
    
    <!-- FONT TEST -->
    <style>
    @font-face {
      font-family: 'SuperRich';
      src: url('fonts/SuperRichExpandedPersonalUseOnlyStretch-0vKAv.otf') format('opentype');
      font-weight: normal;
      font-display: swap;
      unicode-range: U+0041-005A, U+0061-007A; /* Only letters */
    }
    
    @import url('https://fonts.googleapis.com/css2?family=Anton&display=swap');
    
    body {
        background: #000;
        color: #9ED9B5;
        font-family: Arial, sans-serif;
        padding: 20px;
        line-height: 1.6;
    }
    
    .test-section {
        border: 1px solid #9ED9B5;
        margin: 20px 0;
        padding: 20px;
        border-radius: 5px;
    }
    
    .font-test {
        font-family: 'SuperRich', 'Anton', sans-serif;
        font-size: 24px;
        margin: 10px 0;
    }
    
    .error {
        color: #ff6b6b;
    }
    
    .success {
        color: #51cf66;
    }
    
    #diagnostics {
        background: #111;
        padding: 10px;
        border-radius: 5px;
        font-family: monospace;
        white-space: pre-wrap;
    }
    </style>
</head>
<body>
    <h1>üîç FABREVOIE DIAGNOSTIC PAGE</h1>
    
    <div class="test-section">
        <h2>üìù FONT TEST</h2>
        <div class="font-test">FABREVOIE 123:45</div>
        <div class="font-test">Testing: Symbols & Numbers 2025!</div>
        <p>^ Should show custom font for letters, Anton for numbers/symbols</p>
    </div>
    
    <div class="test-section">
        <h2>üé• VIDEO TEST</h2>
        <video id="testVideo" width="200" height="100" controls style="border: 1px solid #9ED9B5;">
            <source src="assets/videos/bttb2.mp4" type="video/mp4">
            <source src="assets/videos/bttb2.webm" type="video/webm">
            <source src="bttb2.mp4" type="video/mp4">
            <source src="bttb2.webm" type="video/webm">
            Your browser does not support video.
        </video>
        <div id="videoStatus">Testing video paths...</div>
    </div>
    
    <div class="test-section">
        <h2>üîÑ 3D LOGO TEST</h2>
        <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
        <model-viewer id="test3d" 
            src="assets/models/3Dlogo5.glb"
            alt="Test 3D Logo" 
            width="200px" 
            height="200px"
            auto-rotate
            style="border: 1px solid #9ED9B5; background: #222;">
        </model-viewer>
        <div id="logoStatus">Testing 3D logo paths...</div>
    </div>
    
    <div class="test-section">
        <h2>üìã DIAGNOSTICS</h2>
        <div id="diagnostics">Running diagnostics...</div>
    </div>
    
    <script>
        const diagnostics = document.getElementById('diagnostics');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const color = type === 'error' ? '#ff6b6b' : type === 'success' ? '#51cf66' : '#9ED9B5';
            diagnostics.innerHTML += `<span style="color: ${color}">[${timestamp}] ${message}</span>\n`;
        }
        
        // Test video loading
        const video = document.getElementById('testVideo');
        const videoStatus = document.getElementById('videoStatus');
        
        video.addEventListener('loadeddata', () => {
            log('‚úÖ VIDEO LOADED SUCCESSFULLY', 'success');
            videoStatus.innerHTML = '<span class="success">‚úÖ Video working!</span>';
        });
        
        video.addEventListener('error', (e) => {
            log('‚ùå VIDEO FAILED TO LOAD: ' + e.message, 'error');
            videoStatus.innerHTML = '<span class="error">‚ùå Video failed</span>';
            
            // Try fallback
            video.src = 'bttb2.mp4';
            log('üîÑ Trying fallback: bttb2.mp4', 'info');
        });
        
        // Test 3D model loading
        const model = document.getElementById('test3d');
        const logoStatus = document.getElementById('logoStatus');
        
        model.addEventListener('load', () => {
            log('‚úÖ 3D MODEL LOADED SUCCESSFULLY', 'success');
            logoStatus.innerHTML = '<span class="success">‚úÖ 3D logo working!</span>';
        });
        
        model.addEventListener('error', (e) => {
            log('‚ùå 3D MODEL FAILED: ' + JSON.stringify(e.detail), 'error');
            logoStatus.innerHTML = '<span class="error">‚ùå 3D logo failed</span>';
            
            // Try fallback
            model.src = '3Dlogo2.glb';
            log('üîÑ Trying fallback: 3Dlogo2.glb', 'info');
        });
        
        // Test file paths
        async function testFilePaths() {
            const paths = [
                'assets/videos/bttb2.mp4',
                'assets/videos/bttb2.webm', 
                'assets/models/3Dlogo2.glb',
                'assets/images/logo-small.png',
                'bttb2.mp4',
                'bttb2.webm',
                '3Dlogo2.glb',
                'logo-small.png',
                'fonts/SuperRichExpandedPersonalUseOnlyStretch-0vKAv.otf'
            ];
            
            log('üîç Testing file paths...', 'info');
            
            for (const path of paths) {
                try {
                    const response = await fetch(path, { method: 'HEAD' });
                    if (response.ok) {
                        log(`‚úÖ FOUND: ${path}`, 'success');
                    } else {
                        log(`‚ùå NOT FOUND: ${path} (${response.status})`, 'error');
                    }
                } catch (error) {
                    log(`‚ùå ERROR: ${path} - ${error.message}`, 'error');
                }
            }
        }
        
        // Test font loading
        function testFont() {
            document.fonts.ready.then(() => {
                const testElement = document.createElement('span');
                testElement.style.fontFamily = 'SuperRich, sans-serif';
                testElement.textContent = 'TEST';
                document.body.appendChild(testElement);
                
                const computedStyle = window.getComputedStyle(testElement);
                const actualFont = computedStyle.fontFamily;
                
                if (actualFont.includes('SuperRich')) {
                    log('‚úÖ CUSTOM FONT LOADED', 'success');
                } else {
                    log('‚ùå CUSTOM FONT FAILED: ' + actualFont, 'error');
                }
                
                document.body.removeChild(testElement);
            });
        }
        
        // Run all tests
        log('üöÄ Starting diagnostics...', 'info');
        testFilePaths();
        testFont();
        
        // Show current URL
        log('üìç Current URL: ' + window.location.href, 'info');
        log('üìÅ Base path: ' + window.location.origin + window.location.pathname, 'info');
    </script>
</body>
</html>
